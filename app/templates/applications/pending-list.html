{% extends "applications/layout.html" %}

{% block content %}
<div class="container clearfix">
  <section class="info">
    <h1 class="info-heading">Applications</h1>
    <p class="info-text"><em>Do we have copy for this?</em></p>
  </section>

  {% for badge in badges %}
    <section class="clearfix">
      <h2>
        <a href="{{ url('applications.forBadge', badge.slug) }}">
          {{ badge.name }}
          <img class="badge-image left" src="{{ badge.imageUrl | default(url('badge.image', {badgeId: badge.id})) }}">
        </a>
      </h2>
      <ul>
        {% for application in badge.applications.slice(0,5) %}
          <li>
            <dl>
              <dt>Learner</dt>
                <dd><a href="{{ url('application', {badgeId: badge.slug, applicationId: application.slug}) }}">{{ application.learner }}</a></dd>
              <dt>Applied on</dt>
                <dd>{{ application.created }}</dd>
            </dl>
          </li>
        {% endfor %}
      </ul>
      {% if badge.applications.length > 5 %}
      <p><a href="{{ url('applications.forBadge', badge.slug) }}">+ {{ badge.applications.length - 5 }} more</a></p>
      {% endif %}
    </section>
  {% endfor %}
</div>
{% endblock %}
